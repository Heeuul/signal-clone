(()=>{"use strict";var e={4430:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var a=n(5690),r=n(4926),i=n(9526),o=n(885),l=n(1133),s=n(4333),d=n(4018),u=n(7132),c=n(9965),f=n(3292),h=n(1844),p=n(7783),g=n(1402),m=((0,h.initializeApp)({apiKey:"AIzaSyAshMgCzSQ15da-jB1u4nA_dZazkhXpvNQ",authDomain:"signal-clone-3a634.firebaseapp.com",projectId:"signal-clone-3a634",storageBucket:"signal-clone-3a634.appspot.com",messagingSenderId:"1016541408815",appId:"1:1016541408815:web:8b0c80a4c8c5ddbe5320da"}),(0,p.getAuth)()),x=(0,g.getFirestore)(),y=n(7557);function j(e){var t=e.navigation,a=(0,i.useState)(""),r=(0,o.default)(a,2),s=r[0],h=r[1],g=(0,i.useState)(""),x=(0,o.default)(g,2),j=x[0],v=x[1];return(0,i.useEffect)((function(){return m.onAuthStateChanged((function(e){e&&t.replace("Home")}))()}),[m]),(0,y.jsxs)(d.default,{style:b.container,behavior:"android"===u.default.OS?"height":"padding",children:[(0,y.jsx)(f.default,{style:"light"}),(0,y.jsx)(c.Image,{style:{width:200,height:200},source:n(6794)}),(0,y.jsxs)(l.default,{style:b.inputContainer,children:[(0,y.jsx)(c.Input,{placeholder:"Email",autoFocus:!0,textContentType:"emailAddress",keyboardType:"email-address",value:s,onChangeText:h}),(0,y.jsx)(c.Input,{placeholder:"Password",secureTextEntry:!0,textContentType:"password",value:j,onChangeText:v})]}),(0,y.jsx)(c.Button,{containerStyle:b.button,title:"Login",onPress:function(){(0,p.signInWithEmailAndPassword)(m,s,j).then((function(){return t.replace("Home")})).catch((function(e){return alert(e)}))}}),(0,y.jsx)(c.Button,{containerStyle:b.button,title:"Register",type:"outline",onPress:function(){return t.navigate("Registration",{passedEmail:s,passedPassword:j})}}),(0,y.jsx)(l.default,{style:{height:100}})]})}var b=s.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},inputContainer:{width:300},button:{width:200,marginTop:10}});function v(e){var t=e.navigation,n=e.route,a=(0,i.useState)(""),r=(0,o.default)(a,2),s=r[0],h=r[1],g=(0,i.useState)(n.params.passedEmail),x=(0,o.default)(g,2),j=x[0],b=x[1],v=(0,i.useState)(n.params.passedPassword),C=(0,o.default)(v,2),S=C[0],T=C[1],k=(0,i.useState)(""),O=(0,o.default)(k,2),E=O[0],L=O[1];return(0,i.useLayoutEffect)((function(){t.setOptions({headerBackTitleVisible:!0,headerBackTitle:"Back to Login"})}),[t]),(0,y.jsxs)(d.default,{behavior:"android"===u.default.OS?"height":"padding",style:w.container,children:[(0,y.jsx)(f.default,{style:"light"}),(0,y.jsx)(c.Text,{h3:!0,style:{marginBottom:50},children:"Create a Signal Account"}),(0,y.jsxs)(l.default,{style:w.inputContainer,children:[(0,y.jsx)(c.Input,{placeholder:"Full Name",autoFocus:!0,value:s,onChangeText:h}),(0,y.jsx)(c.Input,{placeholder:"Email",keyboardType:"email-address",textContentType:"emailAddress",value:j,onChangeText:b}),(0,y.jsx)(c.Input,{placeholder:"Password",secureTextEntry:!0,textContentType:"newPassword",value:S,onChangeText:T}),(0,y.jsx)(c.Input,{placeholder:"Profile Picture URL (optional)",value:E,onChangeText:L,keyboardType:"url",textContentType:"URL"})]}),(0,y.jsx)(c.Button,{containerStyle:w.button,title:"Register Account",onPress:function(){(0,p.createUserWithEmailAndPassword)(m,j,S).then((function(e){return(0,p.updateProfile)(e.user,{displayName:s,photoURL:E||"https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png"})})).then((function(){return t.replace("Home")})).catch((function(e){return alert(e.message)}))},raised:!0,disabled:!s||!j||!S,disabledStyle:w.disabledButton}),(0,y.jsx)(l.default,{style:{height:100}})]})}var w=s.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},inputContainer:{width:300},button:{width:200,marginTop:10},disabledButton:{backgroundColor:"lightgray",width:200,marginTop:10}}),C=n(8576),S=n(1451),T=n(2640),k=n(3830),O=n(5640);function E(e){var t,n=e.id,a=e.chatName,r=e.EnterChat,l=(0,i.useState)(),s=(0,o.default)(l,2),d=s[0],u=s[1];return(0,i.useEffect)((function(){return(0,g.onSnapshot)((0,g.query)((0,g.collection)(x,"chats",n,"messages"),(0,g.orderBy)("timestamp","desc"),(0,g.limit)(1)),(function(e){return u(e.docs.map((function(e){return e.data()})))}))}),[]),(0,y.jsxs)(c.ListItem,{bottomDivider:!0,onPress:function(){return r(n,a)},children:[(0,y.jsx)(c.Avatar,{rounded:!0,source:{uri:(null==d||null==(t=d[0])?void 0:t.photoURL)||"https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png"}}),(0,y.jsxs)(c.ListItem.Content,{children:[(0,y.jsx)(c.ListItem.Title,{style:{fontWeight:"800"},children:a}),(0,y.jsx)(c.ListItem.Subtitle,{numberOfLines:1,ellipsizeMode:"tail",children:null!=d&&d[0]?d[0].displayName+": "+d[0].message:"Click here to start chatting!"})]})]},n)}s.default.create({});function L(e){var t=e.navigation,n=(0,i.useState)([]),a=(0,o.default)(n,2),r=a[0],s=a[1];function d(){(0,p.signOut)(m).then((function(){return t.replace("Login")}))}function u(e,n){t.navigate("Chat",{id:e,chatName:n})}return(0,i.useEffect)((function(){return(0,g.onSnapshot)((0,g.collection)(x,"chats"),(function(e){s(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),(0,i.useLayoutEffect)((function(){var e;t.setOptions({title:null==m||null==(e=m.currentUser)?void 0:e.displayName,headerStyle:{flex:1,alignSelf:"center",textAlign:"center",backgroundColor:"white"},headerTitleStyle:{color:"black"},headerTintColor:"black",headerLeft:function(){var e;return(0,y.jsx)(l.default,{style:{padding:10},children:(0,y.jsx)(S.default,{activeOpacity:.5,onPress:d,children:(0,y.jsx)(c.Avatar,{rounded:!0,source:{uri:null==m||null==(e=m.currentUser)?void 0:e.photoURL}})})})},headerRight:function(){return(0,y.jsxs)(l.default,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20},children:[(0,y.jsx)(S.default,{activeOpacity:.5,children:(0,y.jsx)(T.default,{name:"camerao",size:24,color:"black"})}),(0,y.jsx)(S.default,{activeOpacity:.5,children:(0,y.jsx)(k.default,{name:"pencil",size:24,color:"black",onPress:function(){return t.navigate("AddChat")}})})]})}})}),[t]),(0,y.jsx)(O.SafeAreaView,{children:(0,y.jsx)(C.default,{style:P.container,children:r.map((function(e){var t=e.id,n=e.data.chatName;return(0,y.jsx)(E,{id:t,chatName:n,EnterChat:u},t)}))})})}var P=s.default.create({container:{height:"100%"}}),I=n(9233),R=n(3497),B=n(477),A=n(1223),_=n(5738),N=n(8025);function z(e){var t=e.navigation,n=e.route,a=(0,i.useState)(""),r=(0,o.default)(a,2),s=r[0],h=r[1],p=(0,i.useState)([]),j=(0,o.default)(p,2),b=j[0],v=j[1],w=n.params,k=w.id,O=w.chatName,E=(0,N.default)();function L(){""!==s&&((0,g.addDoc)((0,g.collection)(x,"chats",k,"messages"),{timestamp:(0,g.serverTimestamp)(),userID:k,message:s,displayName:m.currentUser.displayName,email:m.currentUser.email,photoURL:m.currentUser.photoURL}),h(""))}return(0,i.useLayoutEffect)((function(){t.setOptions({title:"Chat - "+O,headerTitleAlign:"left",headerBackTitleVisible:!1,headerBackVisible:!1,headerTitle:function(){return(0,y.jsxs)(l.default,{style:U.headerTitleView,children:[(0,y.jsx)(c.Avatar,{rounded:!0,source:{uri:"https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png"}}),(0,y.jsx)(I.default,{style:U.headerText,children:O})]})},headerLeft:function(){return(0,y.jsx)(S.default,{onPress:function(){return t.goBack()},children:(0,y.jsx)(T.default,{name:"arrowleft",size:24,color:"white"})})},headerRight:function(){return(0,y.jsxs)(l.default,{style:U.headerRight,children:[(0,y.jsx)(S.default,{children:(0,y.jsx)(A.default,{name:"video-camera",size:24,color:"white"})}),(0,y.jsx)(S.default,{children:(0,y.jsx)(_.default,{name:"call",size:24,color:"white"})})]})}})}),[t]),(0,i.useLayoutEffect)((function(){return(0,g.onSnapshot)((0,g.query)((0,g.collection)(x,"chats",k,"messages"),(0,g.orderBy)("timestamp","asc")),(function(e){return v(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[n]),(0,y.jsxs)(B.default,{style:{flex:1,backgroundColor:"white"},children:[(0,y.jsx)(f.default,{style:"light"}),(0,y.jsxs)(d.default,{behavior:"android"===u.default.OS?"height":"padding",style:U.container,keyboardVerticalOffset:E,children:[(0,y.jsx)(C.default,{contentContainerStyle:{paddingVertical:5},children:b.map((function(e){var t=e.id,n=e.data;return n.email===m.currentUser.email?(0,y.jsxs)(l.default,{style:U.sender,children:[(0,y.jsx)(c.Avatar,{position:"absolute",rounded:!0,containerStyle:{position:"absolute",bottom:-15,right:-5},bottom:-15,right:-5,size:30,source:{uri:n.photoURL}}),(0,y.jsx)(I.default,{style:U.senderText,children:n.message})]},t):(0,y.jsxs)(l.default,{style:U.receiver,children:[(0,y.jsx)(c.Avatar,{position:"absolute",rounded:!0,containerStyle:{position:"absolute",bottom:-15,left:-5},bottom:-15,left:-5,size:30,source:{uri:n.photoURL}}),(0,y.jsx)(I.default,{style:U.receiverText,children:n.message}),(0,y.jsx)(I.default,{style:U.receiverName,children:n.displayName})]},t)}))}),(0,y.jsxs)(l.default,{style:U.footer,children:[(0,y.jsx)(R.default,{placeholder:"Signal Message",style:U.footerInput,value:s,onChangeText:h,blurOnSubmit:!1,onSubmitEditing:L}),(0,y.jsx)(S.default,{onPress:L,activeOpacity:.5,children:(0,y.jsx)(_.default,{name:"send",size:24,color:"#2B68E6"})})]})]})]})}var U=s.default.create({headerTitleView:{flexDirection:"row",alignItems:"center",marginLeft:25},headerText:{color:"white",marginLeft:15,fontWeight:"700",fontSize:18},headerRight:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:10},container:{flex:1},footer:{flexDirection:"row",alignItems:"center",width:"100%",padding:15},sender:{padding:15,backgroundColor:"#ECECEC",alignSelf:"flex-end",borderRadius:20,marginRight:15,marginBottom:20,maxWidth:"80%",position:"relative"},senderText:{color:"black",fontWeight:"500",marginLeft:10},receiver:{padding:15,backgroundColor:"#2B68E6",alignSelf:"flex-start",borderRadius:20,margin:15,maxWidth:"80%",position:"relative"},receiverName:{left:10,paddingRight:10,fontSize:10,color:"white"},receiverText:{color:"white",fontWeight:"500",marginLeft:10,marginBottom:15},footerInput:{bottom:0,height:40,flex:1,marginRight:15,borderColor:"transparent",backgroundColor:"#ECECEC",borderWidth:1,padding:10,color:"grey",borderRadius:30}}),D=n(5861),W=n(4285);function V(e){var t=e.navigation,n=(0,i.useState)(""),a=(0,o.default)(n,2),r=a[0],s=a[1];function d(){return(d=(0,D.default)((function*(){yield(0,g.addDoc)((0,g.collection)(x,"chats"),{chatName:r}).then((function(){return t.goBack()})).catch((function(e){return alert(e)}))}))).apply(this,arguments)}return(0,i.useLayoutEffect)((function(){t.setOptions({title:"Add a new chat",headerBackTitle:"Chats"})}),[]),(0,y.jsxs)(l.default,{style:M.container,children:[(0,y.jsx)(c.Input,{placeholder:"Enter a chat name",value:r,onChangeText:s,leftIcon:(0,y.jsx)(W.default,{name:"wechat",type:"antdesign",size:24,color:"black"})}),(0,y.jsx)(c.Button,{title:"Create New Chat",onPress:function(){return d.apply(this,arguments)},disabled:!r,disabledStyle:{backgroundColor:"lightgray"}})]})}var M=s.default.create({container:{backgroundColor:"white",padding:30,height:"100%"}}),F={headerStyle:{backgroundColor:"#2C6BED"},headerTitleStyle:{color:"white"},headerTintColor:"white"};function H(){var e=(0,r.default)();return(0,y.jsxs)(e.Navigator,{screenOptions:F,children:[(0,y.jsx)(e.Screen,{name:"Login",component:j}),(0,y.jsx)(e.Screen,{name:"Registration",component:v}),(0,y.jsx)(e.Screen,{name:"Home",component:L}),(0,y.jsx)(e.Screen,{name:"Chat",component:z}),(0,y.jsx)(e.Screen,{name:"AddChat",component:V})]})}function q(){return(0,y.jsx)(a.default,{children:(0,y.jsx)(H,{})})}},6794:(e,t,n)=>{e.exports=n.p+"static/media/logo.222dc75522e60b4f1ff3.png"}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,(()=>{var e=[];n.O=(t,a,r,i)=>{if(!a){var o=1/0;for(u=0;u<e.length;u++){for(var[a,r,i]=e[u],l=!0,s=0;s<a.length;s++)(!1&i||o>=i)&&Object.keys(n.O).every((e=>n.O[e](a[s])))?a.splice(s--,1):(l=!1,i<o&&(o=i));if(l){e.splice(u--,1);var d=r();void 0!==d&&(t=d)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[a,r,i]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(a,r){if(1&r&&(a=this(a)),8&r)return a;if("object"===typeof a&&a){if(4&r&&a.__esModule)return a;if(16&r&&"function"===typeof a.then)return a}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var l=2&r&&a;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>o[e]=()=>a[e]));return o.default=()=>a,n.d(i,o),i}})(),n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/signal-clone/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var r,i,[o,l,s]=a,d=0;if(o.some((t=>0!==e[t]))){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(s)var u=s(n)}for(t&&t(a);d<o.length;d++)i=o[d],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},a=self.webpackChunkweb=self.webpackChunkweb||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=n.O(void 0,[96],(()=>n(9484)));a=n.O(a)})();
//# sourceMappingURL=main.9eb0faa1.js.map